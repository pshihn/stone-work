<html>

<head>
  <title>StoneWork demo</title>
  <script src="../dist/stone-work.es6.js"></script>
  <style>
    body {
      margin: 0;
      font-family: 'Roboto', sans-serif;
      font-size: 11pt;
      line-height: 1.5;
    }

    #toolbar {
      background: #213034;
      color: white;
      padding: 20px;
      margin-bottom: 15px;
    }

    #grid {
      position: relative;
    }

    h3 {
      margin: 0;
      padding: 10px;
      width: 100%;
      box-sizing: border-box;
      text-align: center;
    }

    .node {
      display: -ms-flexbox;
      display: -webkit-flex;
      display: flex;
      -ms-flex-align: center;
      -webkit-align-items: center;
      -webkit-box-align: center;
      align-items: center;
    }

    label div {
      font-size: 11px;
    }
  </style>
</head>

<body>
  <div id="toolbar">
    <select id="style">
      <option value="square">Square</option>
      <option value="rhombus">Rhombus</option>
    </select>
    <label><input id="chkColor" type="checkbox" checked> Background color</label>
    <label><input id="chkImager" type="checkbox"> Background image</label>
    <label style="display: inline-block; margin: 0 5px;">
      <div>Cell Spacing</div>
      <input style="width: 82px;" id="cspacing" type="number" value="0">
    </label>
    <button onclick="render()">Render</button>
  </div>
  <div id="grid"></div>
  <script>
    function $$(id) {
      return document.getElementById(id);
    }

    function createGridOptions() {
      let options = {};
      let cs = +$$('cspacing').value;
      if (cs) {
        options.cellSpacing = cs;
      }
      return options;
    }

    function createNodeOptions() {
      let options = {};
      if ($$('chkColor').checked) {
        options.backgroundColor = "rgb(" + Math.floor(150 + Math.random() * 155) + "," + Math.floor(150 + Math.random() * 155) + "," + Math.floor(150 + Math.random() * 155) + ")";
      }
      return options;
    }

    function render() {
      let sw;
      if (window._sw) {
        sw = window._sw;
        sw.clear();
      }
      let grid = document.getElementById("grid");
      let styleSelector = $$('style');
      let gridType = styleSelector.options[styleSelector.selectedIndex].value;
      sw = new StoneWork(grid, gridType, createGridOptions());
      window._sw = sw;
      let count = 18;
      for (let i = 0; i < count; i++) {
        let n = document.createElement("div");
        let h = document.createElement('h3');
        h.textContent = "TITLE " + i;
        n.appendChild(h);
        n.classList.add("node");
        sw.add(n, createNodeOptions());
      }
    }
  </script>
</body>

</html>